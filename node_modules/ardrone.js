var arDrone = require('ar-drone');
var client = arDrone.createClient();

client.takeoff();
client.config('control:altitude_max', 100000);
cv.readImage("./examples/files/mona.png", function(err, im){
  im.detectObject(cv.FACE_CASCADE, {}, function(err, faces){
    for (var i=0;i<faces.length; i++){
      var x = faces[i]
      im.ellipse(x.x + x.width/2, x.y + x.height/2, x.width/2, x.height/2);
    }
    im.save('./out.jpg');
  });
})

client
 .after(3500, function() {
 	this.clockwise(0.5);
 })
 .after(3000, function() {
 	this.animate('flipLeft', 15);
 	this.animateLeds('blinkRed',5,2);
 })

 .after(2500, function() {
 	this.animate('flipRight', 25);
 }
 	)
 //.after(1000, function() {
 	//this.clockwise(0.3);
 //})
  .after(1000, function() {
 	this.stop();
 	this.land();
 });
 client.on('navdata', console.log);

 var pngStream = client.getPngStream();
 pngStream.on('data', console.log);
 arDrone.createClient(['192.168.1.1', 5, null]);


